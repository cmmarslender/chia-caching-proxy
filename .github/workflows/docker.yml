name: Build Docker Image

on:
  push:
    branches:
      - main
  workflow_dispatch:
  schedule:
    - cron: '20 0 * * 0'

permissions:
  id-token: write
  contents: read
  packages: write

jobs:
  package:
    uses: Chia-Network/actions/.github/workflows/docker-build.yaml@docker-registry-caching
    with:
      docker-platforms: 'linux/amd64'
      enable-cache: 'true'
      report-image-size: 'true'
